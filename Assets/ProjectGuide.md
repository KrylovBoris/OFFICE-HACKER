# Содержание
- [Содержание](#содержание)
- [Гайды](#гайды)
  - [Как собрать игрового персонажа?](#как-собрать-игрового-персонажа)
  - [Как сделать файловую систему?](#как-сделать-файловую-систему)
  - [Как сделать компонент, с которым игрок может взаимодействовать?](#как-сделать-компонент-с-которым-игрок-может-взаимодействовать)
  - [Как настроить обучение?](#как-настроить-обучение)
- [Что где лежит?](#что-где-лежит)
  - [_Scenes](#_scenes)
  - [Animations](#animations)
  - [Characters](#characters)
  - [Gizmos и NavMesh Components](#gizmos-и-navmesh-components)
  - [Icons](#icons)
  - [JsonDotNet](#jsondotnet)
  - [Materials](#materials)
  - [Office structural objects and furniture](#office-structural-objects-and-furniture)
  - [Office Supplies](#office-supplies)
  - [Plugins](#plugins)
  - [Prefabs](#prefabs)
  - [Probuilder Data](#probuilder-data)
  - [Resources](#resources)
  - [ScriptableObjects](#scriptableobjects)
  - [Scripts](#scripts)
  - [Sprites](#sprites)
  - [Standart Assets](#standart-assets)
  - [Text Assets](#text-assets)
  - [TextMesh Pro](#textmesh-pro)
  - [UI Prefabs](#ui-prefabs)
- [Диплом](#диплом)
- [Дизайн документ](#дизайн-документ)

# Гайды

## Как собрать игрового персонажа?
1. Разместите модель на сцене.
2. Добавьте ей компоненты Animator, NavMeshAgent, BaseAgent, AnimationManager, Rigidbody, CapsuleCollider.
3. Создайте личность персонажу (ПКМ > Create > ScriptableObjects > Personality).
4. В Rigidbody отметьте галочку IsKinematic.
5. Не забудьте добавить ссылку на WorkingPlace и Department (На сцене OfficeGame: Office > Department > AiControllers).
6. Создайте профиль персонажу (ПКМ > Create > ScriptableObjects > Profile).
7. В GameManager на сцене добавьте профиль в компонент ProfileDatabase.
 
## Как сделать файловую систему?
1. Создайте ScriptableObject для файловой системы (ПКМ > Create > ScriptableObjects > FileSystem).
2. Откройте окно редактирования файловой системы (Window > Edit file system).
3. Выбирете созданный вами объект и редактируйте его.
4. Не забудьте добавить ссылку на созданный вами объект, когда закончите.

## Как сделать компонент, с которым игрок может взаимодействовать?
1. Создайте реализацию интерфейса IInterractable, которая также наследуется от класса Monobehaviour.
2. Добавьте её к игровому объекту.

## Как настроить обучение?
1. Создайте объект TutorialObject.
2. Задайте количество этапов обучения.
3. Для каждого этапа задайте текст обучения, задайте триггер для перехода на следующий этап и объект для триггера.
   * Триггер Zone Enter требует объекта с триггер-коллайдером, в который должен зайти игрок.
   * Триггер Camera Look требует объект, который имеет коллайдер.
   * Триггер Object Enabled просто требует объект, который включается-выключается.

# Что где лежит?
В данном разделе мы рассмотрим какие папки есть в проекте, и что каждая из них содержит. 

## _Scenes
Папка, которая содержит все сцены игры.
* **FinalTestScene.unity** — сцена, где происходит тест игрока.
* **LoadingScreen.unity** — сцена, которая загружается перед тем, как загружается основной уровень игры.
* **MainMenu.unity** — сцена, которая содержит главное меню.
* **OfficeGame.unity** — основная сцена с игрой.
* **TechnicalScene.unity** — сцена, которая когда-то использовалась для тестирования.

## Animations
В этой папке лежат анимации и контроллеры. Из названий должно быть плюс-минус понятно, что там происходит. Если что-то непонятно, можно посмотреть провью анимации.

## Characters
Эта папка содержит ассеты, связанные с персонажами. Стандартная папка содержит:
1. Модель персонажа
2. Материалы
3. Экземпляр ScriptableObject типа Personality, который содержит данные о личности НИП.
4. Экземпляр ScriptableObject типа Profile, который содержит логины и пароли НИП.
4. Собранный префаб персонажа, который мы помещаем на сцену.

## Gizmos и NavMesh Components
Библиотека для поиска путей неигровыми персонажами. Нужно и важно, не удалять.

## Icons
Различные наборы иконок для пользовательского интерфейса.

## JsonDotNet
Библиотека для работы с json файлами в Unity. Нужно для внутриигровой энциклопедии.

## Materials
Материалы для различных объектов.

## Office structural objects and furniture 
Различные декорации, стены, полы, потолки и мебель. 
## Office Supplies
Мелкие ассеты, офисный реквезит, который можно раскидать по столу.
## Plugins
Папка для плагинов, но пока там только библиотека Jetbrains.Lifetimes для написания реактивных систем. Эта библиотека используется в подсистеме токенов. Не удалять.
## Prefabs 
Префабы, которые используются в игре.
1. **GameManager** — объект, который управляет сценой OfficeGame.
2. **PC** — объект, который представляет из себя ПК НИП.
3. **WorkingSpace** — рабочее место НИП.
4. **Player** — объект, который представляет из себя игрока.
5. **SpawnableObjects** — папка с префабами, которые инстанцируются во внутриигровом мире.
6. **Structure** — папка с префабами, которые были использованы для сборки помещений офиса.

## Probuilder Data
Служебная папка Пробилдера. Не уверен, зачем она нужна вообще, нужно проверить документацию.
## Resources
Служебная папка, которая содержит ассеты, которые включаются в итоговый билд. Пока единственный файл, который там хранится — ProbabilityMatrix. Не удаляйте его! Он нужен для вычисления вероятности случайных событий.

## ScriptableObjects 
Экземпляры Scriptable object для использования в игре.
1. **EmailCommutator** — специальный объект, который отвечает за передачу электронных писем и связь ящиков.
2. **FileSystem** и **FileSystem 1** — экземпляры HardDrive, которые хранят файловую систему. НЕ РЕДАКТИРУЙТЕ ЭТИ ФАЙЛЫ И ИМ ПОДОБНЫЕ ВРУЧНУЮ. ДЛЯ ЭТОГО СУЩЕСТВУЕТ СПЕЦИАЛЬНОЕ ОКНО (см. [гайд](#как-сделать-файловую-систему)).
3. **Questions for test** — вопросы для теста.
4. **Emails** — папка с заранее созданными имейлами для использования внутри системы.
5. **ShopItems** — папка с предметами для магазина.

## Scripts 
Скрипты, которые используются в игре.
1. **Behaviours** — поведения анимации, которые используются вместе с AnimationManager для управления поведением.
2. **Filesystem** — классы, связанные с внутриигровой файловой системой.
3. **GlobalMechanics** — общие механики, с которыми взаимодействуют игрок и НИПы
   1. *UI* — классы, управляющие поведением внутриигровом GUI. 
   2.  *ScriptableObjects* — классы, отнаследованные от ScriptableObject.
4. **HierarchicalTaskNetwork** — система автоматического планирования на иерархических сетях задач. Нужна для ИИ. Чтобы найти больше информации, ознакомьтесь с [документацией](https://github.com/KrylovBoris/Hierarchical-Task-Network-planner-for-Unity).
5. **Interactions** — различные классы, управляющие взаимодействиями НИП и игрока с окружением.
6. **KnowledgeSystem** — библиотека, которая необходима для репрезентации системы знаний и графа поведения игрока.
7.  **NPC** — классы, которые управляют поведением НИПов.
    1.  *Conversations* — классы, управляющие общением НИПов.
    3.  *Tokens* — раздатчики токенов и токены, управляющие декомпозицией задач.
8.  **Player** — классы, связанные с системами, управляющими поведением персонажа игрока.
9.  **Tests** — папка, в которой можно и нужно размещать юнит-тесты. Пока там нет юнит-тестов, связанных с игрой, но в будущем их можно добавить сюда.
10. **TutorialSystem** — классы, связанные с системой обучения.

## Sprites 
Различные спрайты, которые используются в игре, например, фоновые изображения для GUI.

## Standart Assets
Пакет со стандартными ассетами Unity, может пригодиться.

## Text Assets
Содержит текстовые ассеты игры.
1. **Codex.json** — файл, который содержит внутреигровую энциклопедию.
2. **TestFileSystem.json** — тестовая json-файловая система. Не используется после рефакторингов.
3. **TestQuestions.json** — вопросы к тесту. Не используются после рефакторингов.
## TextMesh Pro 
Содержит генерируемые шрифты для игры и библиотеку для этой генерации.

## UI Prefabs
Префабы для пользовательского интерфейса. 
* **ApprovalPanel** — всплывающее диалоговое окно для подтверждения действия
* **DirectoryEntry** — кнопка, репрезентующая файл или папку в GUI внутриигровой файловой системы. 
* **ExplorerMenu** — дроп-даун меню для GUI внутриигровой файловой системы, открывающееся по правому клику мыши.
* **InventoryEntry** — объект, выводящий информацию о количестве предмета в наличии у игрока для внутриигрового магазина.
* **ItemButton** — Кнопка для открытия категории во внутреигровой энциклопедии.
* **LetterButton 1** — вариация кнопки для открытия электронного письма в компьютере НИП.
* **LetterButton** — вариация кнопки для открытия электронного письма в смартфоне игрока.
* **QuestionCanvas** — объект, содержащий весь GUI для теста.
* **ShopItem** — панель для добавления предмета во внутриигровом магазине.
* **Tip** — всплывающая подсказка для UI элемента.

# Диплом
[Текст диплома](https://drive.google.com/file/d/1TtLrke6YU85in2p35VAkg_IYoD1n4IUO/view?usp=sharing)
Этот документ содержит ссылки на использованную литературу, описание систем и математических моделей, использованных в игре.
# Дизайн документ
[Дизайн-документ для игры расположен по этой ссылке](https://docs.google.com/document/d/1MUj6_jbMuP606olQBziq5WjJ0qdwLblO_31FCP3ZiNU/edit?usp=sharing)
Данный документ содержит конспекты после работы с источниками, а также черновики игровых механик. Далеко не все механики были реализованы, далеко не все они подходят игре. По сути, это черновик после работы с дипломом, который может содержать полезную информацию.
Если вам зачем-то понадобиться поработать с этим документом, запросите доступ или напишите мне на почту: hakkanx@gmail.com